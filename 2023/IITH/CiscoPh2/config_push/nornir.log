2025-02-25 14:02:10,644 -  nornir.core -     INFO -        run() - Running task 'Create New User' with args {} on 1 hosts
2025-02-25 14:02:11,437 -  nornir.core -     INFO -        run() - Running task 'Remove Existing Users' with args {} on 1 hosts
2025-02-25 14:03:50,682 -  nornir.core -     INFO -        run() - Running task 'create_new_user' with args {} on 1 hosts
2025-02-25 14:03:51,423 -  nornir.core -     INFO -        run() - Running task 'remove_existing_users' with args {} on 1 hosts
2025-02-25 14:04:21,865 - nornir.core.task -    ERROR -      start() - Host 'RCC-R2-4F-SWITCH': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 38, in netmiko_send_config
    result = net_connect.send_config_set(config_commands=config_commands, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 111, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 2336, in send_config_set
    output += self.read_until_pattern(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 751, in read_until_pattern
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 

Pattern not detected: '(?:RCC\\-R2\\-4F\\-SWITCH.*$|#.*$)' in output.

Things you might try to fix this:
1. Adjust the regex pattern to better identify the terminating string. Note, in
many situations the pattern is automatically based on the network device's prompt.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2025-02-25 14:04:21,866 - nornir.core.task -    ERROR -      start() - Host 'RCC-R2-4F-SWITCH': task 'remove_existing_users' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/CiscoPh2/config_push/create a new username.py", line 64, in remove_existing_users
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_config (failed)


2025-02-25 14:38:44,112 -  nornir.core -     INFO -        run() - Running task 'create_new_user' with args {} on 1 hosts
2025-02-25 14:38:44,885 -  nornir.core -     INFO -        run() - Running task 'remove_existing_users' with args {} on 1 hosts
2025-02-25 14:48:41,819 -  nornir.core -     INFO -        run() - Running task 'create_new_user' with args {} on 1 hosts
2025-02-25 14:48:44,081 - nornir.core.task -    ERROR -      start() - Host 'RCC-R2-4F-SWITCH': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1142, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 450, in connect
    self._auth(
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 781, in _auth
    raise saved_exception
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 768, in _auth
    self._transport.auth_password(username, password)
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 1564, in auth_password
    return self.auth_handler.wait_for_response(my_event)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/auth_handler.py", line 259, in wait_for_response
    raise e
paramiko.ssh_exception.AuthenticationException: Authentication failed.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 410, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 498, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1179, in establish_connection
    raise NetmikoAuthenticationException(msg)
netmiko.exceptions.NetmikoAuthenticationException: Authentication to device failed.

Common causes of this problem are:
1. Invalid username and password
2. Incorrect SSH-key file
3. Connecting to the wrong device

Device settings: cisco_ios 10.4.112.109:22


Authentication failed.

2025-02-25 14:48:44,082 - nornir.core.task -    ERROR -      start() - Host 'RCC-R2-4F-SWITCH': task 'create_new_user' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/CiscoPh2/config_push/create a new username.py", line 23, in create_new_user
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_config (failed)


2025-02-25 14:48:44,086 -  nornir.core -  WARNING -        run() - Task 'remove_existing_users' has not been run â€“ 0 hosts selected
2025-02-25 14:49:55,274 -  nornir.core -     INFO -        run() - Running task 'create_users' with args {} on 1 hosts
2025-02-25 14:49:56,567 -  nornir.core -     INFO -        run() - Running task 'remove_existing_users' with args {} on 1 hosts

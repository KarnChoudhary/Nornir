2024-08-29 02:48:52,704 -  nornir.core -     INFO -        run() - Running task 'nornir_napalm_get_example' with args {} on 2 hosts
2024-08-29 02:49:25,308 -  nornir.core -     INFO -        run() - Running task 'nornir_napalm_get_example' with args {} on 2 hosts
2024-08-29 02:50:08,475 -  nornir.core -     INFO -        run() - Running task 'nornir_napalm_get_example' with args {} on 2 hosts
2024-08-29 02:51:52,937 -  nornir.core -     INFO -        run() - Running task 'nornir_napalm_get_example' with args {} on 2 hosts
2024-08-29 02:56:35,851 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-08-29 02:56:36,820 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=write_file,
         ^^^^^^^^^^
NameError: name 'write_file' is not defined

2024-08-29 02:56:36,821 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=write_file,
         ^^^^^^^^^^
NameError: name 'write_file' is not defined

2024-08-29 03:02:43,451 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-08-29 03:02:44,463 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-08-29 03:02:44,464 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-08-29 03:05:13,606 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-08-29 03:05:14,530 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-08-29 03:05:14,577 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-08-29 03:10:30,654 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-08-29 03:10:31,602 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-08-29 03:10:31,612 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 24, in backup_configurations
    content=r.result["config"]["running"],
            ~~~~~~~~^^^^^^^^^^
KeyError: 'config'

2024-09-06 06:39:52,845 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-09-06 06:39:52,846 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 17, in backup_configurations
    date_dir = config_dir + "/" + str(date.today())
                                      ^^^^
NameError: name 'date' is not defined

2024-09-06 06:39:52,846 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 17, in backup_configurations
    date_dir = config_dir + "/" + str(date.today())
                                      ^^^^
NameError: name 'date' is not defined

2024-09-06 06:50:13,484 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-09-06 06:50:14,567 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:50:14,765 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:50:24,813 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-09-06 06:50:25,935 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:50:25,971 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:51:56,861 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 2 hosts
2024-09-06 06:51:57,814 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:51:57,815 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 06:55:42,127 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 3 hosts
2024-09-06 06:55:52,169 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-3F-SW': task 'napalm_get' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
                           ^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.5.48.62:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/tasks/napalm_get.py", line 32, in napalm_get
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
                  ^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.5.48.62

2024-09-06 06:55:52,170 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-3F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 21, in backup_configurations
    r = task.run(task=napalm_get, getters=[g])
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_get (failed)


2024-09-06 06:55:52,170 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'napalm_get' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
                           ^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.5.48.64:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/tasks/napalm_get.py", line 32, in napalm_get
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
                  ^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.5.48.64

2024-09-06 06:55:52,171 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 21, in backup_configurations
    r = task.run(task=napalm_get, getters=[g])
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_get (failed)


2024-09-06 06:55:52,169 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'napalm_get' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
                           ^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.5.48.63:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/tasks/napalm_get.py", line 32, in napalm_get
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
                  ^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 10.5.48.63

2024-09-06 06:55:52,171 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 21, in backup_configurations
    r = task.run(task=napalm_get, getters=[g])
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: napalm_get (failed)


2024-09-06 07:18:58,719 -  nornir.core -     INFO -        run() - Running task 'Creating Backup Archive' with args {} on 3 hosts
2024-09-06 07:18:59,787 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-3F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 07:18:59,956 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 07:18:59,987 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'Creating Backup Archive' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup.py", line 23, in backup_configurations
    task=fns.write_file,
         ^^^^^^^^^^^^^^
AttributeError: module 'nornir_utils.plugins.functions' has no attribute 'write_file'

2024-09-06 07:26:26,801 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 3 hosts
2024-09-06 07:26:27,811 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 3 hosts
2024-09-06 07:26:27,817 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-6F-SW': task 'save_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup2.py", line 28, in save_running_config
    f.write(config)
TypeError: write() argument must be str, not MultiResult

2024-09-06 07:26:27,818 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-3F-SW': task 'save_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup2.py", line 28, in save_running_config
    f.write(config)
TypeError: write() argument must be str, not MultiResult

2024-09-06 07:26:27,818 - nornir.core.task -    ERROR -      start() - Host 'BHP-A-9F-SW': task 'save_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup2.py", line 28, in save_running_config
    f.write(config)
TypeError: write() argument must be str, not MultiResult

2024-09-06 07:28:42,665 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 3 hosts
2024-09-06 07:28:43,502 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 3 hosts
2024-09-06 07:48:18,168 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 211 hosts
2024-09-06 07:48:41,218 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 211 hosts
2024-09-06 17:20:39,800 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 211 hosts
2024-09-06 17:21:02,197 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 211 hosts
2024-09-06 18:21:02,933 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 3 hosts
2024-09-06 18:21:03,893 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 3 hosts
2024-09-06 18:21:04,002 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 3 hosts
2024-09-06 18:21:04,141 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 3 hosts
2024-09-06 18:21:04,144 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 3 hosts
2024-09-06 18:21:04,146 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 3 hosts
2024-09-06 18:28:52,551 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 3 hosts
2024-09-06 18:28:53,314 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 3 hosts
2024-09-06 18:28:53,437 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 3 hosts
2024-09-06 18:28:53,589 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 3 hosts
2024-09-06 18:28:53,684 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 3 hosts
2024-09-06 18:28:53,687 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 3 hosts
2024-09-06 18:28:53,689 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 3 hosts
2024-09-06 18:28:53,690 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 3 hosts
2024-09-06 18:30:26,175 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 211 hosts
2024-09-06 18:30:49,804 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.4.128.122:22



2024-09-06 18:30:49,805 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/backup4.py", line 22, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-09-06 18:30:49,807 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 210 hosts
2024-09-06 18:30:55,754 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 210 hosts
2024-09-06 18:30:58,844 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 210 hosts
2024-09-06 18:31:00,792 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 210 hosts
2024-09-06 18:31:00,817 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 210 hosts
2024-09-06 18:31:00,830 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 210 hosts
2024-09-06 18:31:00,841 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 210 hosts
2024-09-12 12:59:58,087 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 211 hosts
2024-09-12 13:00:22,098 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.4.128.122:22



2024-09-12 13:00:22,099 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/config_backup/test.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-09-12 13:00:22,101 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 210 hosts
2024-09-12 13:00:28,035 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 210 hosts
2024-09-12 13:00:30,781 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 210 hosts
2024-09-12 13:00:32,659 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 210 hosts
2024-09-12 13:00:35,482 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 210 hosts
2024-09-12 13:00:35,513 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 210 hosts
2024-09-12 13:00:35,528 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 210 hosts
2024-09-12 13:00:35,541 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 210 hosts
2024-09-12 13:00:35,551 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 210 hosts
2024-10-04 12:32:31,442 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 211 hosts
2024-10-04 12:32:55,935 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-02': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.4.120.103:22



2024-10-04 12:32:55,937 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-02': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-04 12:34:29,546 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 212 hosts
2024-10-04 12:34:53,960 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-02': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.4.120.103:22



2024-10-04 12:34:53,962 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-02': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-04 12:34:53,965 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 211 hosts
2024-10-04 12:34:59,896 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 211 hosts
2024-10-04 12:35:03,729 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 211 hosts
2024-10-04 12:35:05,760 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 211 hosts
2024-10-04 12:35:08,611 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 211 hosts
2024-10-04 12:35:08,644 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 211 hosts
2024-10-04 12:35:08,668 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 211 hosts
2024-10-04 12:35:08,680 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 211 hosts
2024-10-04 12:35:08,691 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 211 hosts
2024-10-18 15:52:37,207 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 212 hosts
2024-10-18 15:53:00,274 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 212 hosts
2024-10-18 15:53:06,169 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 212 hosts
2024-10-18 15:53:09,209 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 212 hosts
2024-10-18 15:53:11,479 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 212 hosts
2024-10-18 15:53:14,394 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 212 hosts
2024-10-18 15:53:14,424 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 212 hosts
2024-10-18 15:53:14,445 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 212 hosts
2024-10-18 15:53:14,459 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 212 hosts
2024-10-18 15:53:14,470 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 212 hosts
2024-10-23 16:34:29,663 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 212 hosts
2024-10-23 16:34:39,738 - nornir.core.task -    ERROR -      start() - Host 'AD2-Dist-SW': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:34:39,738 - nornir.core.task -    ERROR -      start() - Host 'AD2-Dist-SW': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:34:47,587 - nornir.core.task -    ERROR -      start() - Host 'Admin-Shaft_A-2F': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:34:47,589 - nornir.core.task -    ERROR -      start() - Host 'Admin-Shaft_A-2F': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:34:58,659 - nornir.core.task -    ERROR -      start() - Host 'BHJ-A-9F-SW': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:34:58,662 - nornir.core.task -    ERROR -      start() - Host 'BHJ-A-9F-SW': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:34:59,673 - nornir.core.task -    ERROR -      start() - Host 'BHJ-B-3F-SW': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:34:59,673 - nornir.core.task -    ERROR -      start() - Host 'BHJ-B-3F-SW': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:35:01,818 - nornir.core.task -    ERROR -      start() - Host 'BHJ-B-9F-SW': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:35:01,821 - nornir.core.task -    ERROR -      start() - Host 'BHJ-B-9F-SW': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:35:27,612 - nornir.core.task -    ERROR -      start() - Host 'BHP1-A-6F-SW': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in connect
    retry_on_signal(lambda: sock.connect(addr))
  File "/usr/lib/python3/dist-packages/paramiko/util.py", line 279, in retry_on_signal
    return function()
           ^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 358, in <lambda>
    retry_on_signal(lambda: sock.connect(addr))
                            ^^^^^^^^^^^^^^^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 10.5.48.73:22



2024-10-23 16:35:27,614 - nornir.core.task -    ERROR -      start() - Host 'BHP1-A-6F-SW': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:36:02,501 - nornir.core.task -    ERROR -      start() - Host 'CoreLab-1F': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1824, in send_command
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 
Pattern not detected: 'CORELAB\\-1F\\#' in output.

Things you might try to fix this:
1. Explicitly set your pattern using the expect_string argument.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-10-23 16:36:02,503 - nornir.core.task -    ERROR -      start() - Host 'CoreLab-1F': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:36:04,550 - nornir.core.task -    ERROR -      start() - Host 'DoD-Z1-GF': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1824, in send_command
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 
Pattern not detected: 'DOD\\-ZONE\\-1\\-GF\\#' in output.

Things you might try to fix this:
1. Explicitly set your pattern using the expect_string argument.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-10-23 16:36:04,553 - nornir.core.task -    ERROR -      start() - Host 'DoD-Z1-GF': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:36:24,192 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:36:24,193 - nornir.core.task -    ERROR -      start() - Host 'IGH- R4-4F': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:36:26,677 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-01': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/usr/lib/python3/dist-packages/paramiko/client.py", line 427, in connect
    server_key = t.get_remote_server_key()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/paramiko/transport.py", line 879, in get_remote_server_key
    raise SSHException("No existing session")
paramiko.ssh_exception.SSHException: No existing session

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 26, in netmiko_send_command
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/kali/.local/lib/python3.11/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/kali/.local/lib/python3.11/site-packages/netmiko/base_connection.py", line 1182, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: Paramiko: 'No existing session' error: try increasing 'conn_timeout' to 15 seconds or larger.

2024-10-23 16:36:26,679 - nornir.core.task -    ERROR -      start() - Host 'KNC-R1-01': task 'get_running_config' failed with traceback:
Traceback (most recent call last):
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/kali/Desktop/Nornir/2023/IITH/Cisco Ph2/config_backup/backup running config,neighbors,vlan,arp inspection,lldp ngbr.py", line 24, in get_running_config
    result = task.run(
             ^^^^^^^^^
  File "/home/kali/.local/lib/python3.11/site-packages/nornir/core/task.py", line 174, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: netmiko_send_command (failed)


2024-10-23 16:37:07,009 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 202 hosts
2024-10-23 16:37:20,939 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 202 hosts
2024-10-23 16:37:29,288 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 202 hosts
2024-10-23 16:37:35,925 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 202 hosts
2024-10-23 16:37:41,624 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 202 hosts
2024-10-23 16:37:41,654 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 202 hosts
2024-10-23 16:37:41,675 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 202 hosts
2024-10-23 16:37:41,687 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 202 hosts
2024-10-23 16:37:41,700 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 202 hosts
2024-12-04 12:02:38,587 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 212 hosts
2024-12-04 12:03:01,241 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 212 hosts
2024-12-04 12:03:07,174 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 212 hosts
2024-12-04 12:03:09,963 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 212 hosts
2024-12-04 12:03:11,886 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 212 hosts
2024-12-04 12:03:15,491 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 212 hosts
2024-12-04 12:03:15,526 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 212 hosts
2024-12-04 12:03:15,542 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 212 hosts
2024-12-04 12:03:15,562 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 212 hosts
2024-12-04 12:03:15,584 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 212 hosts
2024-12-27 16:28:48,439 -  nornir.core -     INFO -        run() - Running task 'get_running_config' with args {} on 212 hosts
2024-12-27 16:29:11,786 -  nornir.core -     INFO -        run() - Running task 'get_arp_inspection' with args {} on 212 hosts
2024-12-27 16:29:17,753 -  nornir.core -     INFO -        run() - Running task 'get_cdp_neighbors' with args {} on 212 hosts
2024-12-27 16:29:20,556 -  nornir.core -     INFO -        run() - Running task 'get_vlan' with args {} on 212 hosts
2024-12-27 16:29:23,251 -  nornir.core -     INFO -        run() - Running task 'get_lldp_neighbors' with args {} on 212 hosts
2024-12-27 16:29:26,218 -  nornir.core -     INFO -        run() - Running task 'save_running_config' with args {} on 212 hosts
2024-12-27 16:29:26,238 -  nornir.core -     INFO -        run() - Running task 'save_arp_inspection' with args {} on 212 hosts
2024-12-27 16:29:26,308 -  nornir.core -     INFO -        run() - Running task 'save_cdp_neighbors' with args {} on 212 hosts
2024-12-27 16:29:26,331 -  nornir.core -     INFO -        run() - Running task 'save_vlan' with args {} on 212 hosts
2024-12-27 16:29:26,351 -  nornir.core -     INFO -        run() - Running task 'save_lldp_neighbors' with args {} on 212 hosts
